<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Generator</title>
    <style>
        /* General Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            /* Add padding for header and footer */
            padding: 80px 20px; 
            overflow: hidden;
            position: relative;
            background: radial-gradient(ellipse at center, #1a0f35 0%, #05020b 100%);
        }
        
        /* --- HEADER --- */
        .page-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0, 0.2);
            backdrop-filter: blur(5px);
            z-index: 10;
        }

        .header-logo {
            height: 35px;
        }

        /* --- FOOTER --- */
        .page-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0, 0.2);
            backdrop-filter: blur(5px);
            z-index: 10;
        }

        .footer-url {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            font-weight: bold;
        }

        .hearts-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            overflow: hidden;
            pointer-events: none;
            perspective: 1000px;
        }

        .heart {
            position: absolute;
            font-size: 25px;
            animation: flyTowards linear infinite;
            pointer-events: none;
            opacity: 0;
            will-change: transform, opacity;
            color: #ff1493;
            text-shadow: 
                0 0 10px #ff1493,
                0 0 20px #ff1493,
                0 0 30px #ff1493;
        }

        .heart:nth-child(even) {
            color: #ff69b4;
            text-shadow: 
                0 0 15px #ff69b4,
                0 0 25px #ff69b4,
                0 0 35px #ff69b4;
        }

        .heart:nth-child(3n) {
            color: #f0f;
            text-shadow: 
                0 0 20px #f0f,
                0 0 30px #f0f,
                0 0 40px #f0f;
        }

        @keyframes flyTowards {
            0% {
                transform: translateZ(-1000px) scale(0.1) translateY(-50px);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                transform: translateZ(100px) scale(3.5) translateY(100px);
                opacity: 0.8;
            }
            100% {
                transform: translateZ(200px) scale(4) translateY(150px);
                opacity: 0;
            }
        }
        
        .hearts-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(1px 1px at 20px 30px, rgba(255, 255, 255, 0.2), transparent),
                radial-gradient(1px 1px at 40px 70px, rgba(255, 255, 255, 0.1), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(255, 255, 255, 0.3), transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: starfield 30s linear infinite;
            opacity: 0.5;
        }

        @keyframes starfield {
            0% { transform: translateY(0); }
            100% { transform: translateY(-100px); }
        }
        
        .video-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.2);
            z-index: -1;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            max-height: calc(100vh - 160px); /* Adjust for header/footer and padding */
            overflow-y: auto;
        }
        
        .title {
            text-align: center;
            color: white;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .button-row, .era-row {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .type-btn, .era-btn, .generate-btn, .print-btn, .reset-btn {
            transition: all 0.3s ease;
        }
        
        .type-btn, .era-btn {
            cursor: pointer;
        }

        .type-btn:disabled, .era-btn:disabled, .generate-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .type-btn {
            padding: 12px 20px;
            border: 2px solid white;
            border-radius: 25px;
            background: transparent;
            color: white;
            font-weight: bold;
            font-size: 16px;
        }
        
        .type-btn:hover, .type-btn.active {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .era-btn {
            padding: 10px 18px;
            border: 2px solid #ff6b6b;
            border-radius: 20px;
            background: transparent;
            color: #ff6b6b;
            font-weight: bold;
            font-size: 14px;
        }
        
        .era-btn:hover, .era-btn.active {
            background: #ff6b6b;
            color: white;
            transform: translateY(-2px);
        }
        
        .generate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a6f);
            border: none;
            border-radius: 25px;
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .result-area {
            background: linear-gradient(135deg, rgba(255, 240, 245, 0.9), rgba(230, 230, 250, 0.9));
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25), inset 0 0 10px rgba(255, 255, 255, 0.6);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            color: #4a2d6b;
            display: none;
            line-height: 1.7;
            font-family: 'Georgia', 'Times New Roman', serif;
            font-size: 17px;
            overflow-y: hidden;
            position: relative; /* Needed for the loader overlay */
            min-height: 280px; /* Ensure space for loader */
        }
        
        .result-loader {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(2px);
            border-radius: 15px; /* Match parent */
            display: none; /* Hidden by default */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 5;
        }

        .result-loader .spinner {
             width: 50px;
             height: 50px;
             border: 4px solid rgba(74, 45, 107, 0.2);
             border-top-color: #4a2d6b;
             border-radius: 50%;
             animation: spin 1s linear infinite;
        }

        .result-loader .loading-text {
            margin-top: 15px;
            font-weight: bold;
            color: #4a2d6b;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .action-buttons {
            display: none; /* Hidden by default */
            gap: 15px;
            margin-top: 20px;
        }

        .print-btn, .reset-btn {
            flex-grow: 1;
            padding: 12px;
            border: none;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
        
        .print-btn {
             background: linear-gradient(45deg, #667eea, #764ba2);
        }
        .reset-btn {
            background: linear-gradient(45deg, #868f96, #596164);
        }
        
        .print-btn:hover, .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .error {
            background: rgba(255, 0, 0, 0.1);
            border: 2px solid #ff4444;
            color: #ff4444;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }
        
        @media (max-width: 768px) {
            .container { padding: 20px; }
            .title { font-size: 2em; }
            .button-row, .era-row { flex-direction: column; align-items: stretch; }
        }

    </style>
</head>
<body>
    <!-- --- HEADER --- -->
    <header class="page-header">
        <img src="https://raw.githubusercontent.com/sebastianruffberlin/love-generator/main/templates/logo.png" alt="Stadtmuseum Logo" class="header-logo">
    </header>

    <div class="hearts-background"></div>
    <div class="video-overlay"></div>

    <div class="container" id="mainContainer">
        <h1 class="title">💕 LOVE GENERATOR 💕</h1>
        
        <form id="loveForm">
            <div class="button-row">
                <button type="button" class="type-btn" data-type="Liebesgedicht">Liebesgedicht</button>
                <button type="button" class="type-btn" data-type="Liebesbrief">Liebesbrief</button>
            </div>
            <div class="era-row">
                <button type="button" class="era-btn" data-era="17">17. Jh.</button>
                <button type="button" class="era-btn" data-era="18">18. Jh.</button>
                <button type="button" class="era-btn" data-era="19">19. Jh.</button>
                <button type="button" class="era-btn" data-era="20">20. Jh.</button>
                <button type="button" class="era-btn" data-era="21">21. Jh.</button>
            </div>
            <button type="submit" class="generate-btn" id="generateBtn">✨ Liebe generieren</button>
        </form>
        
        <div class="result-area" id="resultArea">
            <div class="result-loader" id="resultLoader">
                <div class="spinner"></div>
                <div class="loading-text">Text wird generiert...</div>
            </div>
        </div>
        <div class="error" id="errorArea"></div>
        
        <div class="action-buttons" id="actionButtons">
            <button class="print-btn" id="printBtn">🖨️ Drucken</button>
            <button class="reset-btn" id="resetBtn">🔄 Neu beginnen</button>
        </div>
    </div>

    <!-- --- FOOTER --- -->
    <footer class="page-footer">
        <span class="footer-url">www.stadtmuseum.de</span>
    </footer>

    <script>
        let selectedType = '';
        let selectedEra = '';

        const mockResponses = {
            '17_Liebesgedicht': `Oh holdste Maid, Euer Antlitz klar,\nwie's Firmament, so wunderbar.\nMein Herze brennt in lichterloh'n,\nvernehmt mein Fleh'n, verlasst mich schon?\nNein, bleibt bei mir, in Ewigkeit,\nso sei's beschieden, für alle Zeit.`,
            '17_Liebesbrief': `Hochverehrte Dame,\nmit zitternder Hand führe ich die Feder, um Euch die Tiefen meiner Seele zu offenbaren. Seit dem Tage, da mein Blick den Euren kreuzte, ist mein Herz nicht mehr mein eigen. Es gehört Euch allein, und ich flehe zu den Sternen, dass Ihr dieses bescheidene Geschenk nicht verschmäht.\nIn ewiger Ergebenheit,\nEuer Verehrer.`,
            '18_Liebesgedicht': `Anmut'ge Seele, Lichtgestalt,\nDein Wesen meine Sinne schallt.\nVernunft gebeut, ich soll's nicht wagen,\ndoch Herz und Seele woll'n es klagen:\nIch liebe Dich, mit jeder Faser,\nmein Glück, mein Stern, mein Lebensfaser.`,
            '18_Liebesbrief': `Meine Teuerste,\ndie Gesetze der Vernunft mögen uns Fesseln anlegen, doch die Gefühle meines Herzens sprengen jede Kette. In einer Welt der Aufklärung seid Ihr das hellste Licht, das meine Gedanken erhellt. Jeder Moment ohne Euch ist eine verlorene Ewigkeit.\nEwig der Eure.`,
            '19_Liebesgedicht': `In düst'rer Nacht, ein heller Schein,\nso drangst du in mein Herz hinein.\nDie Welt voll Sturm und wildem Toben,\nwird durch dein Lächeln aufgehoben.\nDu bist mein Anker, Fels und Hort,\nan diesem und an jedem Ort.`,
            '19_Liebesbrief': `Mein einziges Herz,\nin dieser Zeit des Umbruchs und der stählernen Riesen seid Ihr mein ruhender Pol. Die Sehnsucht nach Eurer Nähe verzehrt mich und treibt mich an, alle Hindernisse zu überwinden, die das Schicksal uns in den Weg legt.\nIn unsterblicher Liebe,\nDein.`,
            '20_Liebesgedicht': `Asphalt und Neon, Lärm der Stadt,\nich hab' dein Lächeln niemals satt.\nDu bist mein Swing, mein Rock'n'Roll,\nmachst mein Herz und meine Seele voll.\nIn dieser schnellen, wirren Zeit,\nbist du meine Beständigkeit.`,
            '20_Liebesbrief': `Mein Liebling,\nzwischen den Zeilen von Zeitungspapier und dem Flackern des Kinos sehe ich nur dein Gesicht. Du bist moderner als jede Erfindung und zeitloser als jeder Klassiker. Mit dir möchte ich durch die Jahrzehnte tanzen, Hand in Hand.\nIch liebe dich.`,
            '21_Liebesgedicht': `Dein Profilbild, ein Klick, ein Like,\nmein Herz macht einen Purzelbaum-Strike.\nWir chatten, texten, Tag und Nacht,\nhaben uns online um den Verstand gebracht.\nDoch offline, real, ist es noch krasser,\nmeine Liebe zu dir wird immer... besser.\nOkay, der Reim war schlecht, du weißt, was ich mein',\nwill einfach nur für immer bei dir sein.`,
            '21_Liebesbrief': `Hey,\nich weiß, das hier ist irgendwie oldschool, aber 140 Zeichen reichen einfach nicht aus.\nJede Nachricht von dir lässt mein Handy aufleuchten und mein Herz schneller schlagen. Du bist mein Lieblings-Meme, meine Endlos-Playlist und der einzige Mensch, mit dem ich meinen Akku teilen würde.\nHoffe, wir sehen uns bald.\n<3`,
            'default': 'Es tut mir leid, aber für diese Auswahl konnte ich keinen passenden Text finden. Bitte versuchen Sie eine andere Kombination.'
        };

        function fetchMockResponse(type, era) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    const key = `${era}_${type}`;
                    const text = mockResponses[key] || mockResponses['default'];
                    resolve({ text: text });
                }, 2500);
            });
        }
        
        const typeBtns = document.querySelectorAll('.type-btn');
        const eraBtns = document.querySelectorAll('.era-btn');
        const generateBtn = document.getElementById('generateBtn');
        const loveForm = document.getElementById('loveForm');
        const resultArea = document.getElementById('resultArea');
        const errorArea = document.getElementById('errorArea');
        const actionButtons = document.getElementById('actionButtons');
        const printBtn = document.getElementById('printBtn');
        const resetBtn = document.getElementById('resetBtn');
        const resultLoader = document.getElementById('resultLoader');

        function setFormEnabled(enabled) {
            typeBtns.forEach(btn => btn.disabled = !enabled);
            eraBtns.forEach(btn => btn.disabled = !enabled);
            generateBtn.disabled = !enabled;
        }

        typeBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                typeBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                selectedType = this.dataset.type;
            });
        });
        
        eraBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                eraBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                selectedEra = this.dataset.era;
            });
        });
        
        loveForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            if (!selectedType || !selectedEra) {
                showError('Bitte wähle sowohl eine Art des Textes als auch ein Jahrhundert aus.');
                return;
            }
            
            setFormEnabled(false);
            actionButtons.style.display = 'none';
            errorArea.style.display = 'none';
            resultArea.style.display = 'block';
            resultArea.innerHTML = ''; 
            resultLoader.style.display = 'flex';
            resultArea.appendChild(resultLoader);

            try {
                const responseData = await fetchMockResponse(selectedType, selectedEra);
                
                resultLoader.style.display = 'none';

                if (responseData.error) {
                    showError('Fehler: ' + responseData.error);
                } else {
                    resultArea.innerHTML = responseData.text.replace(/\n/g, '<br>');
                    actionButtons.style.display = 'flex';
                }
                
            } catch (error) {
                resultLoader.style.display = 'none';
                showError('Unerwarteter Fehler: ' + error.message);
            } finally {
                setFormEnabled(true);
            }
        });
        
        printBtn.addEventListener('click', function() {
            const resultText = document.getElementById('resultArea').innerText;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`<html><head><title>Romantischer Text</title><style>body{font-family:'Times New Roman',serif;padding:40px;line-height:1.6;}h1{color:#d9534f;text-align:center;}div{white-space:pre-wrap;font-size:1.1em;}</style></head><body><h1>💕 Dein romantischer Text 💕</h1><hr><div>${resultText}</div></body></html>`);
            printWindow.document.close();
            printWindow.focus();
            printWindow.print();
            printWindow.close();
        });

        resetBtn.addEventListener('click', function() {
            resultArea.style.display = 'none';
            actionButtons.style.display = 'none';
            errorArea.style.display = 'none';
            selectedType = '';
            selectedEra = '';
            typeBtns.forEach(b => b.classList.remove('active'));
            eraBtns.forEach(b => b.classList.remove('active'));
            setFormEnabled(true);
        });
        
        function showError(message) {
            errorArea.textContent = message;
            errorArea.style.display = 'block';
            resultArea.style.display = 'none';
        }

        function createHearts() {
            const heartsContainer = document.querySelector('.hearts-background');
            if (!heartsContainer) return;
            const heartSymbols = ['♥', '♡', '💕', '💖', '💗', '💘'];
            const heartCount = 30;
            heartsContainer.innerHTML = '';
            for (let i = 0; i < heartCount; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.top = Math.random() * 100 + 'vh';
                heart.style.animationDelay = Math.random() * 8 + 's';
                heart.style.animationDuration = (Math.random() * 5 + 6) + 's';
                heartsContainer.appendChild(heart);
            }
        }

        document.addEventListener('DOMContentLoaded', createHearts);
    </script>
</body>
</html>
